<app-header></app-header>
<section
  class="background"
  style="background: radial-gradient(circle, rgba(0, 0, 0, 0.4) 10%, rgba(0, 0, 0, 0.7) 90%), url('../../assets/img/popcorn_2.jpeg');"
>
  <form [formGroup]="resetPasswordForm" (ngSubmit)="onSubmit()" class="form-container">
    <div class="login-content">
      <h1>Reset Password</h1>
      <span>Create a new password for your Videoflix account.</span>

      <!-- New Password Field -->
      <mat-form-field appearance="fill" class="input-field">
        <mat-label>New Password</mat-label>
        <input
          matInput
          [type]="hidePassword ? 'password' : 'text'"
          formControlName="newPassword"
          required
        />
        <button
          mat-icon-button
          matSuffix
          type="button"
          (click)="hidePassword = !hidePassword"
        >
          <mat-icon>{{ hidePassword ? 'visibility_off' : 'visibility' }}</mat-icon>
        </button>
        <mat-error *ngIf="resetPasswordForm.get('newPassword')?.hasError('required')">
          Password is required.
        </mat-error>
        <mat-error *ngIf="resetPasswordForm.get('newPassword')?.hasError('minlength')">
          Password must be at least 6 characters long.
        </mat-error>
      </mat-form-field>

      <!-- Confirm Password Field -->
      <mat-form-field appearance="fill" class="input-field">
        <mat-label>Confirm Password</mat-label>
        <input
          matInput
          [type]="hideConfirmPassword ? 'password' : 'text'"
          formControlName="confirmPassword"
          required
        />
        <button
          mat-icon-button
          matSuffix
          type="button"
          (click)="hideConfirmPassword = !hideConfirmPassword"
        >
          <mat-icon>{{ hideConfirmPassword ? 'visibility_off' : 'visibility' }}</mat-icon>
        </button>
        <mat-error *ngIf="resetPasswordForm.get('confirmPassword')?.hasError('required')">
          Confirmation is required.
        </mat-error>
        <mat-error *ngIf="resetPasswordForm.errors?.['passwordsMismatch']">
          Passwords do not match.
        </mat-error>
      </mat-form-field>

      <!-- Submit Button -->
      <div class="login-lower-content">
        <button [disabled]="resetPasswordForm.invalid" mat-flat-button color="primary">
          Reset Password
        </button>
      </div>
    </div>
  </form>

  <p *ngIf="message" class="info-message">{{ message }}</p>
  <p *ngIf="error" class="error-message">{{ error }}</p>
</section>
