<app-header></app-header>
<section
  class="background"
  style="background: radial-gradient(circle, rgba(0, 0, 0, 0.4) 10%, rgba(0, 0, 0, 0.7) 90%), url('../../assets/img/popcorn_2.jpeg');">
<form [formGroup]="signUpForm" (ngSubmit)="onSubmit()" >
    <div class="login-content">
      <h1>Sign up</h1>
      <button [routerLink]="'/login'" class="back_arrow" mat-icon-button >
        <mat-icon >arrow_back</mat-icon>
      </button>
        <mat-form-field >
            <mat-label>Email Address</mat-label>
            <input
              matInput
              [(ngModel)]="emailFromStartPage"
              placeholder="pat@example.com"
              [formControl]="email"
              (blur)="updateErrorMessage()"
              required
            />
            @if (email.invalid) {
              <mat-error>{{errorMessage()}}</mat-error>
            }
          </mat-form-field>

          <mat-form-field style="margin-bottom: 0;">
            <mat-label>Enter a Password</mat-label>
            <input
            matInput
            [type]="hide() ? 'password' : 'text'"
            formControlName="password"
            placeholder="Enter your password"
            required
            />
            <mat-error *ngIf="password?.invalid && password?.touched">
              {{ password?.hasError('required') ? 'Password is required' : '' }}
              {{ password?.hasError('minlength') ? 'Minimum 6 characters required' : '' }}
            </mat-error>
            <button
              mat-icon-button
              matSuffix
              (click)="clickEvent($event)"
              [attr.aria-label]="'Hide password'"
              [attr.aria-pressed]="hide()"
            >
              <mat-icon>{{hide() ? 'visibility_off' : 'visibility'}}</mat-icon>
            </button>
          </mat-form-field>

          <mat-form-field style="margin-bottom: 0;">
            <mat-label>Confirm Password</mat-label>
            <input
        matInput
        [type]="hide() ? 'password' : 'text'"
        formControlName="confirmPassword"
        placeholder="Confirm your password"
        required
      />
      <mat-error *ngIf="confirmPassword?.invalid && confirmPassword?.touched">
        {{ confirmPassword?.hasError('required') ? 'Please confirm your password' : '' }}
      </mat-error>

      <mat-error *ngIf="signUpForm.hasError('passwordMismatch') && confirmPassword?.touched">
          Passwords do not match.
        </mat-error>
      
            <button
              mat-icon-button
              matSuffix
              (click)="clickEvent($event)"
              [attr.aria-label]="'Hide password'"
              [attr.aria-pressed]="hide()"
            >
              <mat-icon>{{hide() ? 'visibility_off' : 'visibility'}}</mat-icon>
            </button>
            @if (email.invalid) {
              <mat-error>{{errorMessage()}}</mat-error>
            }
          </mat-form-field>
          <div class="login-lower-content">
            <button type="submit" [disabled]="signUpForm.invalid" mat-flat-button color="primary">
              Get Started
            </button>
          </div>
    </div>
    

</form>
<app-footer></app-footer>
</section>
